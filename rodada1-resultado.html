<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Rodada 1 ‚Äì Resultado</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      background-color: #121212;
      color: #fff;
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 20px;
    }

    h1 {
      color: #ffe600;
      font-size: 1.8em;
      margin-bottom: 10px;
    }

    .sub {
      font-size: 0.95em;
      color: #ccc;
      margin-bottom: 30px;
    }

    .feedback-card {
      background-color: #1e1e1e;
      border-left: 6px solid #333;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 25px;
    }

    .feedback-card h2 {
      font-size: 1.2em;
      color: #00ccff;
      margin-bottom: 10px;
    }

    .feedback-card[data-categoria="‚ùå"] {
      border-left-color: #ff4c4c;
    }

    .feedback-card[data-categoria="‚úÖ"] {
      border-left-color: #4caf50;
    }

    .feedback-card[data-categoria="‚ö†Ô∏è"] {
      border-left-color: #ffc107;
    }

    .feedback-card ul {
      margin: 0;
      padding-left: 20px;
    }

    .feedback-card li {
      margin-bottom: 5px;
      line-height: 1.4;
    }

    .feedback-card strong {
      color: #fff;
    }

    .final-msg {
      background-color: #252525;
      padding: 20px;
      border-left: 5px solid #ffe600;
      border-radius: 8px;
      margin-top: 40px;
      font-size: 1.1em;
    }

    .botao {
      margin-top: 30px;
      padding: 12px 24px;
      background-color: #ffe600;
      color: #000;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      display: inline-block;
    }
  </style>
</head>
<body>
  <h1>üåç Rodada 1: Outubro de 2016 ‚Äì O ataque silencioso</h1>
  <p class="sub">A seguir, confira o feedback detalhado com base nas escolhas do seu grupo.</p>
  <div id="feedback-container"></div>
  <div id="final-msg" class="final-msg"></div>
  <button class="botao" onclick="proximaRodada()">Pr√≥xima etapa</button>

  <script>
    async function carregarFeedback() {
      const selecionadas = JSON.parse(localStorage.getItem('defesasEscolhidas') || '[]');
      const resposta = await fetch('feedbackRodada1.json');
      const feedbackData = await resposta.json();

      const container = document.getElementById('feedback-container');
      let acertos = 0;

      selecionadas.forEach(id => {
        const fb = feedbackData[id];
        if (!fb) return;

        if (fb.acerto === true) acertos++;

        const card = document.createElement('div');
        card.classList.add('feedback-card');
        card.dataset.categoria = fb.categoria;
        card.innerHTML = `
          <h2>${id}. ${fb.titulo} ${fb.categoria}</h2>
          <ul>
            <li><strong>Vulnerabilidades ${fb.acerto === true ? 'tratadas' : fb.acerto === false ? 'ignoradas' : 'n√£o relacionadas'}:</strong> ${fb.vulnerabilidades}</li>
            <li><strong>Princ√≠pios ${fb.acerto === true ? 'protegidos' : fb.acerto === false ? 'violados' : 'n√£o relacionados diretamente'}:</strong> ${fb.principios}</li>
            <li><strong>Conformidade:</strong>
              <ul>${fb.conformidade.map(l => `<li>‚úî ${l}</li>`).join('')}</ul>
            </li>
            <li><strong>Explica√ß√£o pedag√≥gica:</strong> ${fb.explicacao}</li>
          </ul>
        `;
        container.appendChild(card);
      });

      const finalMsg = document.getElementById('final-msg');
      if (acertos === 5) {
        finalMsg.innerHTML = "üü¢ <strong>Acerto Total:</strong> Parab√©ns! Suas escolhas formaram uma defesa completa contra o ataque. Medidas t√©cnicas como firewall e criptografia, combinadas com estrutura de resposta, teriam evitado a crise vivida pela Uber.";
      } else if (acertos >= 1) {
        finalMsg.innerHTML = "üü° <strong>Acerto Parcial:</strong> Voc√™ tomou decis√µes relevantes, mas ainda deixou pontos cr√≠ticos vulner√°veis. A aus√™ncia de monitoramento ou resposta estruturada comprometeria a prote√ß√£o da empresa.";
      } else {
        finalMsg.innerHTML = "üî¥ <strong>Nenhum Acerto:</strong> Sua equipe ignorou pontos fundamentais e acabou repetindo os erros reais da Uber. A falta de a√ß√µes t√©cnicas e √©ticas deixaria a organiza√ß√£o vulner√°vel e exposta.";
      }
    }

    function proximaRodada() {
      window.location.href = 'rodada2-historia.html';
    }

    carregarFeedback();
  </script>
</body>
</html>
